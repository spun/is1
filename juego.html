<html>
	<head>
		<title>Juego</title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}
			
			canvas {
				border: 1px solid black;
				/*	background-color: #333333;*/
			}
		</style>
		<script type="text/javascript" src='js/jquery-1.7.1.min.js'></script>
		<script type="text/javascript">
			$(document).ready(function(){
			
				var BlackBoard = {
					init: function( config ) {
						this.config = config;
						this.context = this.config.board[0].getContext('2d');
						
						this.isPenDown = false;
						this.penDownPos = {};
						this.penColor = "#888";
						this.penThickness = 1;
						
						if (!this.context)
							alert('Error: failed to getContext!');
						else
							this.bindEvents();
						
					},
					
					bindEvents: function() {
						this.config.board.on('mousedown', this.mouseDown);
						$(document).on('mouseup', this.mouseUp);
						this.config.board.on('mousemove', this.mouseMove);
					},
					
					mouseDown: function (e) {
						var self = BlackBoard;
						
						self.isPenDown = true;
						self.penDownPos.x = e.offsetX;
						self.penDownPos.y = e.offsetY;

						console.log("Mouse down");
					},
					
					mouseUp: function() {
						console.log("Mouse up");
						var self = BlackBoard;
						
						self.isPenDown = false;
					},
					
					mouseMove: function(e) {
						
						var self = BlackBoard;
						if(self.isPenDown)
						{
							var self = BlackBoard;
							
							var mouseX = e.offsetX;
							var mouseY = e.offsetY;
							
							console.log("Mouse move");
							self.drawLine(self.penColor, self.penThickness, self.penDownPos.x, self.penDownPos.y, mouseX, mouseY)						
							self.penDownPos.x = e.offsetX;
							self.penDownPos.y = e.offsetY;
						}
						
					},
										
					drawLine: function(color, thickness, x1, y1, x2, y2) {
						
						this.context.strokeStyle = color;
						this.context.lineWidth   = thickness;
					  this.context.lineCap = 'round';
						this.context.beginPath();
						this.context.moveTo(x1, y1)
						this.context.lineTo(x2, y2);
						this.context.stroke();
					}			
					
				};
				
				BlackBoard.init({
					board: $("#myCanvas")
				});
				
			});
			
			
			
			
		</script>
	</head>
	
	<body>
		<canvas id="myCanvas" width="500" height="500"></canvas>
	</body>
</html>
